function KeyCtroller(e,t,i,o,r){this.keyListerensPlay1={},this.role=e,this.top=t||87,this.right=i||68,this.bottom=o||83,this.left=r||65,this.key87=!0,this.key83=!0,this.key65=!0,this.key68=!0,this.key38=!0,this.key37=!0,this.key40=!0,this.key39=!0,this.keyTop=!0,this.keyRight=!0,this.keyBottom=!0,this.keyLeft=!0,this.dire=[],this.init()}function loadImg(e,t){for(var i={},o=0,r=0;r<e.length;r++){var s=new Image;s.src="./images/"+e[r]+".png",i[e[r]]=s,s.onload=function(){if(o++,game.loadIngGame.drawLoad(o,e.length),o==e.length){t(i),ctxGameloading.globalAlpha=.3;var r=0,s=setInterval(function(){++r>20&&(clearInterval(s),gameloadingCvs.style.display="none"),ctxGameloading.fillStyle="#000",ctxGameloading.fillRect(0,0,gameloadingCvs.width,gameloadingCvs.height)},30)}}}}function loadAudio(e,t){for(var i={},o=0,r=0;r<e.length;r++){var s=new Audio;s.src="./sounds/"+e[r]+".ogg",i[e[r]]=s,s.oncanplay=function(){++o==e.length&&t(i)}}}function createRole(e,t,i,o,r,s,l,h){return new Role({ctxRole:ctxRole,roleImg:e,roleCx:t||200,roleCy:i||200,player1:o,player2:r,ctxBlood:s,bloodImg:l,penBloodImg:h})}function DrawGameBg(e){this.ctxBg=e.ctxBg,this.bgImg=e.bgImg,this.init()}function GameScroe(e){this.ctxGameScore=e.ctxGameScore,this.init()}function GameLoad(e){this.ctxGameloading=e.ctxGameloading,this.loadIngImg=e.loadIngImg,this.width=e.width,this.height=e.height,this.cX=e.cX,this.cY=e.cY,this.init()}function PlayGame(e){this.ctxPlayGame=e.ctxPlayGame,this.playGameImg=e.playGameImg,this.playGameImg2=e.playGameImg2,this.init()}function CheckGame(e){this.ctxCheckGame=e.ctxCheckGame,this.check_view=e.check_view,this.check_view_top=e.check_view_top,this.check_view_bottom=e.check_view_bottom,this.check1=e.check1,this.check2=e.check2,this.check3=e.check3,this.check4=e.check4,this.check5=e.check5,this.check6=e.check6,this.check7=e.check7,this.check8=e.check8,this.single=e.single,this.double=e.double,this.temp=null,this.callbackIn=e.callbackIn,this.callback=function(){this.callbackIn()},this.init()}function PauseGame(e){this.ctxPauseGame=e.ctxPauseGame,this.globalAlpha=e.globalAlpha||.8,this.init()}function GameOver(e){this.ctxGameOver=e.ctxGameOver,this.gameOverImg=e.gameOverImg,this.init()}function Obstacle(e){this.ctxObstacle=e.ctxObstacle,this.obstacleImg=e.obstacleImg,this.init()}function Role(e){this.ctxRole=e.ctxRole,this.roleImg=e.roleImg,this.roleCx=e.roleCx,this.roleCy=e.roleCy,this.roleSpeed=e.roleSpeed||2,this.player1=e.player1,this.player2=e.player2,this.killRang=e.killRang||config.killRang,this.attachTime=config.attachTime,this.roleBody=.4,this.keyListerensPlay1={},this.keyListerensPlay2={},this.dire=[],this.moving=!1,this.bulletIng=[],this.isDie=!1,this.roleTopKey=e.roleTopKey||87,this.roleRightKey=e.roleRightKey||68,this.roleLeftKey=e.roleLeftKey||65,this.rolebottomKey=e.rolebottomKey||83,this.roleX=0,this.roleY=0,this.roleW=this.roleImg.width/8,this.roleH=this.roleImg.height/8,this.roundZombie=0,this.roleIndex=0,this.toTop=!1,this.toRight=!1,this.toBottom=!1,this.toLeft=!1,this.ctxBlood=e.ctxBlood,this.bloodImg=e.bloodImg,this.bloodW=this.bloodImg.width/4,this.bloodH=this.bloodImg.height/8,this.penBloodImg=e.penBloodImg,this.penBloodW=this.penBloodImg.width,this.penBloodH=this.penBloodImg.height,this.init()}function Bullet(e,t,i){this.x=e,this.y=t,this.dire=i}function Zombie(e){this.ctxZombie=e.ctxZombie,this.zombieImg=e.zombieImg,this.zombieW=this.zombieImg.width/8,this.zombieH=this.zombieImg.height/9,this.ctxZomdie=e.ctxZomdie,this.zomDieImg=e.zomDieImg,this.zomDieW=this.zomDieImg.width,this.zomDieH=this.zomDieImg.height/4,this.temp=0,this.zombieNum=100,this.zombieArr=[],this.init(),this.zombieAttack=[]}function CreateGas(e){this.ctxGas=e.ctxGas,this.gasImg=e.gasImg,this.bombArr=e.bombArr,this.gasW=this.gasImg.width,this.gasH=this.gasImg.height,this.bombImg=e.bombImg,this.bombIndex=0,this.bombW=this.bombImg.width,this.bombH=this.bombImg.height/10,this.init()}function SailorGame(e){this.audioObj=["bkg","enter","zhuji","buqian","baozha-da3"],this.imgObj=["play_view","play_view2","check_view","check_view_bottom","check_view_top","check1","check2","check3","check4","check5","check6","check7","check8","gameOver","single","double","bg_1","bg_2","bg_3","bg_4","bg_5","bg_6","bg_7","bg_8","obstacle_1","obstacle_2","obstacle_3","obstacle_4","obstacle_5","obstacle_6","obstacle_7","obstacle_8","role","role2","roleDie","zombie","bullet_1","bullet_2","bullet_3","bullet_5","bullet_6","bullet_7","bullet_8","bullet_4","gas","bombeffect","blood","penBlood","zomDie"],this.playView=null,this.checkView=null,this.pauseGame=null,this.overGame=null,this.scroeGame=null,this.loadIngGame=null,this.role=null,this.role2=null,this.zombie=null,this.gas=null,this.dobuleRole=null,this.gameBg,this.gameObstacle,this.roleXY={},this.roleCtrl1,this.roleCtrl2,this.isPause=!1,this.author=console.warn("author:\n lxjSailor\n 416596401@qq.com")}var config={temps:null,tempsIndex:0,tempsFn:function(){config.tempsIndex++},audios:null,drawText:function(e){for(var t=["0","0","0","0","0","0"],i=e.split("").reverse(),o=0;o<i.length;o++)t[t.length-o-1]=i[o];var r=t.join("");ctxGameOver.font="60px 微软雅黑",ctxGameOver.fillStyle="#000",ctxGameOver.fillText(r,502,435)},createZombieTime:null,attachTime:0,dobuleRole:!0,killRang:20,checked:0,gameBg:[["bg_1","obstacle_1"],["bg_2","obstacle_2"],["bg_3","obstacle_3"],["bg_4","obstacle_4"],["bg_5","obstacle_5"],["bg_6","obstacle_6"],["bg_7","obstacle_7"],["bg_8","obstacle_8"]],bombArr:[[{isBomb:!1,x:206,y:139},{isBomb:!1,x:206,y:370},{isBomb:!1,x:600,y:175},{isBomb:!1,x:996,y:139},{isBomb:!1,x:996,y:370}],[{isBomb:!1,x:410,y:64},{isBomb:!1,x:136,y:281},{isBomb:!1,x:630,y:350},{isBomb:!1,x:1014,y:199}],[{isBomb:!1,x:80,y:284},{isBomb:!1,x:359,y:373},{isBomb:!1,x:428,y:215},{isBomb:!1,x:1003,y:228}],[{isBomb:!1,x:470,y:227},{isBomb:!1,x:718,y:227},{isBomb:!1,x:159,y:330},{isBomb:!1,x:1039,y:330},{isBomb:!1,x:402,y:573},{isBomb:!1,x:529,y:573},{isBomb:!1,x:661,y:573},{isBomb:!1,x:788,y:573}],[{isBomb:!1,x:282,y:162},{isBomb:!1,x:88,y:441},{isBomb:!1,x:313,y:342},{isBomb:!1,x:587,y:146},{isBomb:!1,x:660,y:421},{isBomb:!1,x:1065,y:241}],[{isBomb:!1,x:323,y:150},{isBomb:!1,x:423,y:150},{isBomb:!1,x:523,y:150},{isBomb:!1,x:623,y:150},{isBomb:!1,x:723,y:150},{isBomb:!1,x:823,y:150},{isBomb:!1,x:923,y:150},{isBomb:!1,x:1023,y:150},{isBomb:!1,x:1123,y:150}],[{isBomb:!1,x:318,y:150},{isBomb:!1,x:509,y:150},{isBomb:!1,x:700,y:150},{isBomb:!1,x:891,y:150},{isBomb:!1,x:318,y:472},{isBomb:!1,x:509,y:472},{isBomb:!1,x:700,y:472},{isBomb:!1,x:891,y:472}],[{isBomb:!1,x:489,y:269},{}]],obstacle:[[{x:310,y:139,w:109,h:94},{x:310,y:370,w:109,h:94},{x:546,y:31,w:109,h:84},{x:780,y:139,w:109,h:94},{x:780,y:370,w:109,h:94},{x:431,y:256,w:340,h:94},{x:196,y:506,w:810,h:94}],[{x:111,y:84,w:102,h:94},{x:303,y:117,w:102,h:94},{x:512,y:33,w:102,h:94},{x:742,y:78,w:102,h:94},{x:931,y:32,w:102,h:94},{x:1018,y:284,w:102,h:94},{x:810,y:234,w:102,h:94},{x:915,y:477,w:102,h:94},{x:697,y:364,w:102,h:94},{x:511,y:478,w:102,h:94},{x:437,y:286,w:102,h:94},{x:226,y:259,w:102,h:94},{x:93,y:392,w:102,h:94},{x:257,y:464,w:102,h:94}],[{x:0,y:456,w:1200,h:119},{x:0,y:0,w:1200,h:170},{x:167,y:141,w:137,h:144},{x:767,y:228,w:137,h:171}],[{x:298,y:85,w:149,h:86},{x:486,y:85,w:90,h:86},{x:615,y:85,w:90,h:86},{x:742,y:85,w:149,h:86},{x:298,y:257,w:74,h:86},{x:298,y:478,w:147,h:86},{x:744,y:478,w:147,h:86},{x:486,y:478,w:88,h:86},{x:615,y:478,w:88,h:86}],[{x:415,y:130,w:129,h:40},{x:701,y:194,w:98,h:46},{x:0,y:491,w:1200,h:109}],[{x:210,y:265,w:184,h:70},{x:428,y:310,w:176,h:64},{x:853,y:235,w:40,h:65},{x:893,y:235,w:100,h:80}],[{x:176,y:116,w:92,h:64},{x:176,y:280,w:92,h:64},{x:176,y:447,w:92,h:64},{x:367,y:116,w:92,h:64},{x:367,y:280,w:92,h:64},{x:367,y:447,w:92,h:64},{x:558,y:116,w:92,h:64},{x:558,y:447,w:92,h:64},{x:749,y:116,w:92,h:64},{x:749,y:280,w:92,h:64},{x:749,y:447,w:92,h:64},{x:940,y:116,w:92,h:64},{x:940,y:280,w:92,h:64},{x:940,y:447,w:92,h:64},{x:532,y:275,w:131,h:60}],[{x:122,y:249,w:197,h:20},{x:91,y:269,w:248,h:34},{x:106,y:303,w:223,h:10},{x:124,y:313,w:180,h:10},{x:451,y:383,w:211,h:67},{x:662,y:405,w:34,h:45},{x:710,y:254,w:194,h:43},{x:710,y:297,w:176,h:14},{x:0,y:0,w:1200,h:112}]]},util={extend:function(){for(var e=arguments,t=e[0],i=null,o=1;o<e.length;o++){i=e[o];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}},random:function(e,t){return e=e||0,t=t||0,Math.random()*(t-e)+e},clearCtx:function(e,t,i){e.clearRect(0,0,t,i)},deleObjInArr:function(e,t){var i=util.getIndex(e,t);i>-1&&e.splice(i,1)},getIndex:function(e,t){for(var i=!0,o=0;o<e.length;o++){for(var r in e[o])e[o][r]!=t[r]&&(i=!1);if(i)return o;i=!0}},isObstacle:function(e,t,i){return!!e.isPointInPath(t,i)}},roleCvs=document.getElementById("roleCvs"),ctxRole=roleCvs.getContext("2d"),bulletCvs=document.getElementById("bulletCvs"),ctxBullet=bulletCvs.getContext("2d"),bulletObj={},zombieCvs=document.getElementById("zombieCvs"),ctxZombie=zombieCvs.getContext("2d"),bgCvs=document.getElementById("bgCvs"),ctxBg=bgCvs.getContext("2d"),obstacleCvs=document.getElementById("obstacleCvs"),ctxObstacle=obstacleCvs.getContext("2d"),buterCvs=document.getElementById("buterCvs"),ctxButer=buterCvs.getContext("2d"),dieZombieCvs=document.getElementById("dieZombieCvs"),ctxZomdie=dieZombieCvs.getContext("2d"),bloodCvs=document.getElementById("bloodCvs"),ctxBlood=bloodCvs.getContext("2d"),gasCvs=document.getElementById("gasCvs"),ctxGas=gasCvs.getContext("2d"),playGameCvs=document.getElementById("playGameCvs"),ctxPlayGame=playGameCvs.getContext("2d"),checkGameCvs=document.getElementById("checkGameCvs"),ctxCheckGame=checkGameCvs.getContext("2d"),pauseGameCvs=document.getElementById("pauseGameCvs"),ctxPauseGame=pauseGameCvs.getContext("2d"),gameOverCvs=document.getElementById("gameOverCvs"),ctxGameOver=gameOverCvs.getContext("2d"),gameScoreCvs=document.getElementById("gameScoreCvs"),ctxGameScore=gameScoreCvs.getContext("2d"),gameloadingCvs=document.getElementById("gameloadingCvs"),ctxGameloading=gameloadingCvs.getContext("2d");util.extend(KeyCtroller.prototype,{init:function(){this.event()},event:function(){var e=this;document.addEventListener("keydown",function(t){var i=t.keyCode;e.keyListerensPlay1[i]=i,e.roleMove(),32==i&&e.role.player1&&e.role.attachTime==config.attachTime&&(e.role.shoot(e.role.roleX),e.role.attachTime=0),13==i&&e.role.player2&&e.role.attachTime==config.attachTime&&(e.role.shoot(e.role.roleX),e.role.attachTime=0)}),document.addEventListener("keyup",function(t){var i=t.keyCode;i==e.top&&(e.keyTop=!0,e.role.toTop=!1),i==e.right&&(e.keyRight=!0,e.role.toRight=!1),i==e.bottom&&(e.keyBottom=!0,e.role.toBottom=!1),i==e.left&&(e.keyLeft=!0,e.role.toLeft=!1),delete e.keyListerensPlay1[i],setTimeout(function(){var t=e.dire.indexOf(i);t>-1&&e.dire.splice(t,1)},80)}),this.roleMove()},roleMove:function(){for(var e in this.keyListerensPlay1)this.keyListerensPlay1.hasOwnProperty(e)&&(!1,e==this.top&&this.keyTop&&(this.keyTop=!1,this.role.toTop=!0,this.dire.push(this.top)),e==this.right&&this.keyRight&&(this.keyRight=!1,this.role.toRight=!0,this.dire.push(this.right)),e==this.bottom&&this.keyBottom&&(this.keyBottom=!1,this.role.toBottom=!0,this.dire.push(this.bottom)),e==this.left&&this.keyLeft&&(this.keyLeft=!1,this.role.toLeft=!0,this.dire.push(this.left)))},moveStep:function(){this.role.toTop&&(this.role.roleCy-=this.role.roleSpeed,this.role.roleX=4*this.role.roleW,this.isRevers()&&(this.role.roleCy+=this.role.roleSpeed)),this.role.toLeft&&(this.role.roleCx-=this.role.roleSpeed,this.role.roleX=2*this.role.roleW,this.isRevers()&&(this.role.roleCx+=this.role.roleSpeed)),this.role.toRight&&(this.role.roleCx+=this.role.roleSpeed,this.role.roleX=6*this.role.roleW,this.isRevers()&&(this.role.roleCx-=this.role.roleSpeed)),this.role.toBottom&&(this.role.roleCy+=this.role.roleSpeed,this.role.roleX=0*this.role.roleW,this.isRevers()&&(this.role.roleCy-=this.role.roleSpeed)),this.dire=this.dire.slice(-2,this.dire.length),this.dire!=[]&&((this.dire[0]==this.top&&this.dire[1]==this.right||this.dire[1]==this.top&&this.dire[0]==this.right)&&(this.role.roleX=5*this.role.roleW),(this.dire[0]==this.right&&this.dire[1]==this.bottom||this.dire[1]==this.right&&this.dire[0]==this.bottom)&&(this.role.roleX=7*this.role.roleW),(this.dire[0]==this.bottom&&this.dire[1]==this.left||this.dire[1]==this.bottom&&this.dire[0]==this.left)&&(this.role.roleX=1*this.role.roleW),(this.dire[0]==this.left&&this.dire[1]==this.top||this.dire[1]==this.left&&this.dire[0]==this.top)&&(this.role.roleX=3*this.role.roleW)),this.role.moving=0!=this.dire.length},isRevers:function(){return util.isObstacle(ctxObstacle,this.role.roleCx+this.role.roleW/2,this.role.roleCy+this.role.roleH/2)}}),util.extend(DrawGameBg.prototype,{init:function(){this.drawBg()},drawBg:function(){this.ctxBg.drawImage(this.bgImg,0,0)}}),util.extend(GameScroe.prototype,{init:function(){var e=this;setInterval(function(){e.drawScroe(config.tempsIndex+"")},1e3)},drawScroe:function(e){ctxGameScore.clearRect(0,0,gameScoreCvs.width,gameScoreCvs.height);for(var t=["0","0","0","0","0","0"],i=e.split("").reverse(),o=0;o<i.length;o++)t[t.length-o-1]=i[o];var r=t.join("");ctxGameScore.font="900 60px 微软雅黑",ctxGameScore.fillStyle="#fff",ctxGameScore.lineWidth=2,ctxGameScore.strokeStyle="#000",ctxGameScore.fillText(r,502,50),ctxGameScore.strokeText(r,502,50)}}),util.extend(GameLoad.prototype,{init:function(){this.ctxGameloading.drawImage(this.loadIngImg,0,0)},drawLoad:function(e,t){this.ctxGameloading.fillStyle="#ffe5e5",this.ctxGameloading.fillRect(this.cX,this.cY,e/t*this.width,this.height)}}),util.extend(PlayGame.prototype,{init:function(){this.drawPlayGame(),this.event()},drawPlayGame:function(){this.ctxPlayGame.drawImage(this.playGameImg,0,0)},event:function(){var e=this;playGameCvs.onmousemove=function(t){t.stopPropagation(),t.offsetX>315&&t.offsetX<553&&t.offsetY>277&&t.offsetY<359?(e.ctxPlayGame.clearRect(0,0,playGameCvs.width,playGameCvs.height),e.ctxPlayGame.drawImage(e.playGameImg2,0,0)):(e.ctxPlayGame.clearRect(0,0,playGameCvs.width,playGameCvs.height),e.ctxPlayGame.drawImage(e.playGameImg,0,0))},playGameCvs.onclick=function(e){e.stopPropagation(),config.audios.enter.play(),e.offsetX>315&&e.offsetX<553&&e.offsetY>277&&e.offsetY<359&&(playGameCvs.style.display="none")}}}),util.extend(CheckGame.prototype,{init:function(){this.drawCheckGame(this.check_view_top,0,0),this.drawCheckGame(this.check_view_bottom,0,421),this.event()},drawCheckGame:function(e,t,i){this.ctxCheckGame.drawImage(e,t,i)},event:function(e){var t=this;checkGameCvs.onclick=function(e){config.audios.enter.play(),e.stopPropagation(),e.offsetY>153&&e.offsetY<277&&(e.offsetX>250&&e.offsetX<414&&(t.ctxCheckGame.clearRect(0,0,checkGameCvs.width,checkGameCvs.height-179),t.drawCheckGame(t.check_view_top,0,0),t.drawCheckGame(t.check1,243,143),config.checked=0),e.offsetX>428&&e.offsetX<592&&(t.ctxCheckGame.clearRect(0,0,checkGameCvs.width,checkGameCvs.height-179),t.drawCheckGame(t.check_view_top,0,0),t.drawCheckGame(t.check2,421,143),config.checked=1),e.offsetX>607&&e.offsetX<771&&(t.ctxCheckGame.clearRect(0,0,checkGameCvs.width,checkGameCvs.height-179),t.drawCheckGame(t.check_view_top,0,0),t.drawCheckGame(t.check3,600,143),config.checked=2),e.offsetX>785&&e.offsetX<949&&(t.ctxCheckGame.clearRect(0,0,checkGameCvs.width,checkGameCvs.height-179),t.drawCheckGame(t.check_view_top,0,0),t.drawCheckGame(t.check4,778,143),config.checked=3)),e.offsetY>290&&e.offsetY<414&&(e.offsetX>250&&e.offsetX<414&&(t.ctxCheckGame.clearRect(0,0,checkGameCvs.width,checkGameCvs.height-179),t.drawCheckGame(t.check_view_top,0,0),t.drawCheckGame(t.check5,243,281),config.checked=4),e.offsetX>428&&e.offsetX<592&&(t.ctxCheckGame.clearRect(0,0,checkGameCvs.width,checkGameCvs.height-179),t.drawCheckGame(t.check_view_top,0,0),t.drawCheckGame(t.check6,421,281),config.checked=5),e.offsetX>607&&e.offsetX<771&&(t.ctxCheckGame.clearRect(0,0,checkGameCvs.width,checkGameCvs.height-179),t.drawCheckGame(t.check_view_top,0,0),t.drawCheckGame(t.check7,600,281),config.checked=6),e.offsetX>785&&e.offsetX<949&&(t.ctxCheckGame.clearRect(0,0,checkGameCvs.width,checkGameCvs.height-179),t.drawCheckGame(t.check_view_top,0,0),t.drawCheckGame(t.check8,778,281),config.checked=7)),e.offsetX>547&&e.offsetX<725&&(e.offsetY>445&&e.offsetY<499&&(checkGameCvs.style.display="none",config.dobuleRole=!1,t.callback(),game.render()),e.offsetY>502&&e.offsetY<556&&(checkGameCvs.style.display="none",config.dobuleRole=!0,t.callback(),game.render())),e.offsetX>66&&e.offsetX<333&&e.offsetY>0&&e.offsetY<98&&(config.audios.enter.play(),playGameCvs.style.display="block")},checkGameCvs.onmousemove=function(e){e.stopPropagation(),e.offsetX>547&&e.offsetX<725&&(e.offsetY>445&&e.offsetY<499&&(t.ctxCheckGame.clearRect(0,421,checkGameCvs.width,checkGameCvs.height-421),t.drawCheckGame(t.check_view_bottom,0,421),t.drawCheckGame(t.single,547,445)),e.offsetY>502&&e.offsetY<556&&(t.ctxCheckGame.clearRect(0,421,checkGameCvs.width,checkGameCvs.height-421),t.drawCheckGame(t.check_view_bottom,0,421),t.drawCheckGame(t.double,547,499)))}}}),util.extend(PauseGame.prototype,{init:function(){pauseGameCvs.style.display="none",this.ctxPauseGame.globalAlpha=this.globalAlpha,this.drawPause()},drawPause:function(){this.ctxPauseGame.fillRect(0,0,pauseGameCvs.width,pauseGameCvs.height)}}),util.extend(GameOver.prototype,{init:function(){gameOverCvs.style.display="none",this.drawGameOver(),this.event()},drawGameOver:function(){this.ctxGameOver.drawImage(this.gameOverImg,0,0)},event:function(){gameOverCvs.onclick=function(){window.location.reload()}}}),util.extend(Obstacle.prototype,{init:function(){this.drawObstacle()},drawObstacle:function(){this.ctxObstacle.beginPath(),this.ctxObstacle.drawImage(this.obstacleImg,0,0);for(var e=0;e<config.obstacle[config.checked].length;e++){var t=config.obstacle[config.checked][e];this.ctxObstacle.rect(t.x,t.y,t.w,t.h)}}}),util.extend(Role.prototype,{init:function(){this.roleDraw()},roleDraw:function(){this.roleCx<0&&(this.roleCx+=this.roleSpeed||0),this.roleCx>roleCvs.width-40&&(this.roleCx-=this.roleSpeed),this.roleCy<0&&(this.roleCy+=this.roleSpeed||0),this.roleCy>roleCvs.height-40&&(this.roleCy-=this.roleSpeed||0),ctxGas.isPointInPath(this.roleCx+this.roleW/2,this.roleCy+this.roleH/2)&&(this.isDie=!0,this.roleImg=config.RoleDieImg),this.moving&&(this.roleY=this.roleH*Math.floor(this.roleIndex/4),this.roleIndex++,this.roleIndex>31&&(this.roleIndex=0)),this.ctxRole.drawImage(this.roleImg,this.roleX,this.roleY,this.roleW,this.roleH,this.roleCx,this.roleCy,this.roleW,this.roleH)},clearRole:function(){var e=this;util.clearCtx(e.ctxRole,roleCvs.width,roleCvs.height),ctxBullet.clearRect(0,0,roleCvs.width,roleCvs.height),ctxBullet.beginPath()},shoot:function(e){if(!this.isDie){switch(config.audios.buqian.currentTime=0,config.audios.buqian.play(),e){case 172:var t=this.roleCx+this.roleW/2,i=this.roleCy;break;case 215:var t=this.roleCx+this.roleW,i=this.roleCy;break;case 258:var t=this.roleCx+this.roleW,i=this.roleCy+this.roleH/2;break;case 301:var t=this.roleCx+this.roleW,i=this.roleCy+this.roleH;break;case 0:var t=this.roleCx+this.roleW/2,i=this.roleCy+this.roleH;break;case 43:var t=this.roleCx,i=this.roleCy+this.roleH/2;break;case 86:var t=this.roleCx,i=this.roleCy+this.roleH/4;break;case 129:var t=this.roleCx,i=this.roleCy}this.bulletIng[this.bulletIng.length]={x:t,y:i,dire:e,index:60}}},createBullet:function(e){if(this.isShooted(e),this.attachTime++,this.attachTime>=config.attachTime&&(this.attachTime=config.attachTime),this.bulletIng.length>=0)for(var t=0;t<this.bulletIng.length;t++){var i=this.bulletFly(this.bulletIng[t].x,this.bulletIng[t].y,this.bulletIng[t].dire,this.bulletIng[t].index,e);i&&(this.bulletIng[t]=i)}},isShooted:function(e,t){for(var i=0;i<e.length;i++)if(!(e[i].life<0)){var o=e[i].x+this.roleW/2,r=e[i].y+this.roleH/2;if(ctxBullet.isPointInPath(o,r))return e[i].life--,e[i].backUpTime=10,this.backUp(t,e[i],3,!1),ctxBullet.beginPath(),ctxBullet.clearRect(0,0,1200,600),!1}return!0},bulletFly:function(e,t,i,o,r){var s=this;if(ctxBullet.beginPath(),ctxBullet.arc(e,t,this.killRang,0,2*Math.PI),ctxBullet.closePath(),o<0)util.deleObjInArr(s.bulletIng,{x:e,y:t,dire:i,index:o});else if(this.isShooted(r,i)){for(var l=0;l<config.bombArr[config.checked].length;l++){var h=config.bombArr[config.checked][l];if(!h.isBomb){var a=h.x,m=h.y;if(ctxBullet.isPointInPath(a,m))return util.deleObjInArr(s.bulletIng,{x:e,y:t,dire:i,index:o}),h.isBomb=!0,void game.gas.drawBombScope(a,m)}}if(!util.isObstacle(ctxObstacle,e,t)){switch(o--,i){case 172:ctxBullet.clearRect(e,t,bulletObj.bulletImg.width,bulletObj.bulletImg.height),t-=14,ctxBullet.drawImage(bulletObj.bulletImg,e,t);break;case 215:ctxBullet.clearRect(e,t,bulletObj.bulletImg2.width,bulletObj.bulletImg2.height),e+=14,t-=14,ctxBullet.drawImage(bulletObj.bulletImg2,e,t);break;case 258:ctxBullet.clearRect(e,t,bulletObj.bulletImg3.width,bulletObj.bulletImg3.height),e+=14,ctxBullet.drawImage(bulletObj.bulletImg3,e,t);break;case 301:ctxBullet.clearRect(e,t,bulletObj.bulletImg4.width,bulletObj.bulletImg4.height),e+=14,t+=14,ctxBullet.drawImage(bulletObj.bulletImg4,e,t);break;case 0:ctxBullet.clearRect(e,t,bulletObj.bulletImg5.width,bulletObj.bulletImg5.height),t+=14,ctxBullet.drawImage(bulletObj.bulletImg5,e-this.roleW/4,t);break;case 43:ctxBullet.clearRect(e,t-this.roleH/2,bulletObj.bulletImg6.width,bulletObj.bulletImg6.height),e-=14,t+=14,ctxBullet.drawImage(bulletObj.bulletImg6,e,t-this.roleH/2);break;case 86:ctxBullet.clearRect(e,t-this.roleH/5,bulletObj.bulletImg7.width,bulletObj.bulletImg7.height),e-=14,ctxBullet.drawImage(bulletObj.bulletImg7,e,t-this.roleH/5);break;case 129:ctxBullet.clearRect(e,t,bulletObj.bulletImg8.width,bulletObj.bulletImg8.height),t-=14,e-=14,ctxBullet.drawImage(bulletObj.bulletImg8,e,t)}return{x:e,y:t,dire:i,index:o}}util.deleObjInArr(s.bulletIng,{x:e,y:t,dire:i,index:o})}else util.deleObjInArr(s.bulletIng,{x:e,y:t,dire:i,index:o})},backUp:function(e,t,i,o){function r(){if(t.backUpTime--,o)switch(e){case 0:t.x=t.x,t.y=t.y-i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.y=t.y+i);break;case 1:t.x=t.x+i,t.y=t.y-i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x-i,t.y=t.y+i);break;case 2:t.x=t.x+i,t.y=t.y,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x-i);break;case 3:t.x=t.x+i,t.y=t.y+i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x-i,t.y=t.y-i);break;case 4:t.x=t.x,t.y=t.y+i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.y=t.y-i);break;case 5:t.x=t.x-i,t.y=t.y+i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x+i,t.y=t.y-i);break;case 6:t.x=t.x-i,t.y=t.y,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x+i);break;case 7:t.x=t.x-i,t.y=t.y-i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x+i,t.y=t.y+i)}else{switch(e){case 172:t.x=t.x,t.y=t.y-i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.y=t.y+i);break;case 215:t.x=t.x+i,t.y=t.y-i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x-i,t.y=t.y+i);break;case 258:t.x=t.x+i,t.y=t.y,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x-i);break;case 301:t.x=t.x+i,t.y=t.y+i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x-i,t.y=t.y-i);break;case 0:t.x=t.x,t.y=t.y+i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.y=t.y-i);break;case 43:t.x=t.x-i,t.y=t.y+i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x+i,t.y=t.y-i);break;case 86:t.x=t.x-i,t.y=t.y,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x+i);break;case 129:t.x=t.x-i,t.y=t.y-i,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x=t.x+i,t.y=t.y+i)}s.drawPenBlood(t,e,l)}t.backUpTime>0?window.requestAnimationFrame(r):(t.backUpTime=0,ctxButer.clearRect(0,0,roleCvs.width,roleCvs.height)),s.drawBlood(e,t.x+t.zombieW/2,t.y+t.zombieH/2)}var s=this;switch(e){case 0:l=Math.PI*(45*Math.random()+67.5+180)/180;break;case 43:l=Math.PI*(45*Math.random()+112.5+180)/180;break;case 86:l=Math.PI*(45*Math.random()+157.5+180)/180;break;case 129:l=Math.PI*(45*Math.random()+202.5+180)/180;break;case 172:l=Math.PI*(45*Math.random()+247.5+180)/180;break;case 215:l=Math.PI*(45*Math.random()+292.5+180)/180;break;case 258:l=Math.PI*(45*Math.random()+337.5+180)/180;break;case 301:var l=Math.PI*(45*Math.random()+382.5+180)/180}r(),t.zombieIndex=0},drawBlood:function(e,t,i){var o=Math.floor(8*Math.random());if(172==e||0==e)r=3;else if(43==e||215==e)r=1;else if(86==e||258==e)r=0;else if(129==e||301==e)r=2;if(0==e||4==e)r=3;else if(1==e||5==e)r=1;else if(2==e||6==e)r=0;else if(3==e||7==e)var r=2;this.ctxBlood.drawImage(this.bloodImg,this.bloodW*r,this.bloodH*o,this.bloodW,this.bloodH,t-this.bloodW/2,i-this.bloodH/2+this.roleH/4,this.bloodW,this.bloodH)},drawPenBlood:function(e,t,i){ctxButer.save(),ctxButer.clearRect(0,0,roleCvs.width,roleCvs.height),ctxButer.translate(e.x+e.zombieW/2,e.y+e.zombieH/2),ctxButer.rotate(i),ctxButer.drawImage(this.penBloodImg,0,0,this.penBloodW,this.penBloodH,-this.penBloodW/2,-this.penBloodH/2,this.penBloodW,this.penBloodH),ctxButer.restore()}}),util.extend(Bullet.prototype,{bulletFly:function(e,t,i){switch(ctxBullet.arc(e,t,this.killRang,0,2*Math.PI),ctxBullet.closePath(),ctxBullet.fill(),i){case 172:ctxBullet.clearRect(e,t,_this.bulletImg.width,_this.bulletImg.height),t-=14,ctxBullet.drawImage(_this.bulletImg,e,t);break;case 215:ctxBullet.clearRect(e,t,_this.bulletImg2.width,_this.bulletImg2.height),e+=14,t-=14,ctxBullet.drawImage(_this.bulletImg2,e,t);break;case 258:ctxBullet.clearRect(e,t,_this.bulletImg3.width,_this.bulletImg3.height),e+=14,ctxBullet.drawImage(_this.bulletImg3,e,t);break;case 301:ctxBullet.clearRect(e,t,_this.bulletImg4.width,_this.bulletImg4.height),e+=14,t+=14,ctxBullet.drawImage(_this.bulletImg4,e,t);break;case 0:ctxBullet.clearRect(e,t,_this.bulletImg5.width,_this.bulletImg5.height),t+=14,ctxBullet.drawImage(_this.bulletImg5,e,t);break;case 43:ctxBullet.clearRect(e,t-_this.roleH/2,_this.bulletImg6.width,_this.bulletImg6.height),e-=14,t+=14,ctxBullet.drawImage(_this.bulletImg6,e,t-_this.roleH/2);break;case 86:ctxBullet.clearRect(e,t-_this.roleH/5,_this.bulletImg7.width,_this.bulletImg7.height),e-=14,ctxBullet.drawImage(_this.bulletImg7,e,t-_this.roleH/5);break;case 129:ctxBullet.clearRect(e,t,_this.bulletImg8.width,_this.bulletImg8.height),t-=14,e-=14,ctxBullet.drawImage(_this.bulletImg8,e,t)}},createBullet:function(){if(this.bulletIng.length>0)for(var e=0;e<this.bulletIng.length;e++)this.bulletIng[e]}}),util.extend(Zombie.prototype,{init:function(){this.createZombie(),this.drawZombie()},randomZombie:function(){var e=Math.random()>.5?Math.floor(100*Math.random()-200):Math.floor(200*Math.random()+1200),t=Math.floor(285*Math.random()+170);this.zombieArr.push({x:e,y:t,zombieW:this.zombieImg.width/8,zombieH:this.zombieImg.height/9,index:this.temp++,zomX:0,zomY:50,zombieIndex:1,zombieDire:1,life:Math.random()>.1?2:5,dizziness:0,isDie:!1,zombieSpeed:Math.random()>.1?Math.floor(10*Math.random()+8)/10:2.5,attack:60,backUpTime:0,autoMove:0,tempSpeed:0,autoW:0,autoH:0})},createZombie:function(){var e=this,t=!0,i=!0,o=!0,r=!0;config.createZombieTime=setInterval(function(){if(game.isPause);else{if(config.tempsIndex<60&&e.randomZombie(),config.tempsIndex>30&&t){t=!1;for(s=0;s<20;s++)e.randomZombie()}if(config.tempsIndex>60&&i){i=!1;for(s=0;s<40;s++)e.randomZombie()}if(config.tempsIndex>90&&o){o=!1;for(s=0;s<80;s++)e.randomZombie()}if(config.tempsIndex>120&&r){r=!1;for(var s=0;s<120;s++)e.randomZombie()}}},1e3)},drawZombie:function(){this.ctxZombie.clearRect(0,0,roleCvs.width,roleCvs.height);for(var e=0;e<this.zombieArr.length;e++)if(this.zombieArr[e].life<0&&this.zombieArr[e].backUpTime<=0){if(-1==this.zombieArr[e].life){if(0==this.zombieArr[e].zombieDire||1==this.zombieArr[e].zombieDire)t=0;else if(4==this.zombieArr[e].zombieDire||5==this.zombieArr[e].zombieDire)t=2;else if(2==this.zombieArr[e].zombieDire||3==this.zombieArr[e].zombieDire)t=3;else if(7==this.zombieArr[e].zombieDire||6==this.zombieArr[e].zombieDire)var t=1;this.ctxZomdie.drawImage(this.zomDieImg,0,this.zomDieH*t,this.zomDieW,this.zomDieH,this.zombieArr[e].x,this.zombieArr[e].y,this.zomDieW,this.zomDieH),this.zombieArr[e].life=-2}}else{this.zombieArr[e].zomY=50*Math.floor(this.zombieArr[e].zombieIndex/5);var i=Math.abs(this.zombieArr[e].zombieSpeed);this.zombieArr[e].zombieIndex+=i,this.zombieArr[e].zombieIndex>44&&(this.zombieArr[e].zombieIndex=5),this.zombieArr[e].zomX=43*this.zombieArr[e].zombieDire,this.ctxZombie.drawImage(this.zombieImg,this.zombieArr[e].zomX,this.zombieArr[e].zomY,this.zombieW,this.zombieH,this.zombieArr[e].x,this.zombieArr[e].y,this.zombieW,this.zombieH)}},zombieMove:function(e){var t=e.role1.x,i=e.role1.y;if(game.dobuleRole)var o=e.role2.x,r=e.role2.y;ctxRole.beginPath(),ctxRole.arc(t,i,30,0,2*Math.PI),ctxRole.closePath(),ctxRole.arc(o,r,30,0,2*Math.PI),ctxRole.closePath(),ctxButer.beginPath(),ctxButer.arc(t,i,20,0,2*Math.PI),ctxButer.closePath(),ctxButer.arc(o,r,20,0,2*Math.PI),ctxButer.closePath();for(var s=0;s<this.zombieArr.length;s++)if(ctxGas.isPointInPath(this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].backUpTime=10,game.role.backUp(this.zombieArr[s].zombieDire,this.zombieArr[s],3,!0),this.zombieArr[s].life=-1),!(this.zombieArr[s].life<0||this.zombieArr[s].backUpTime>0)){if(ctxButer.isPointInPath(this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2))this.zombieArr[s].attack--,this.zombieArr[s].zombieSpeed=-Math.abs(this.zombieArr[s].zombieSpeed);else if(ctxRole.isPointInPath(this.zombieArr[s].x+this.zombieW/2,this.zombieArr[s].y+this.zombieH/2)){this.zombieArr[s].attack--;var l=this.zombieArr[s].x+this.zombieArr[s].zombieW/2-t,h=this.zombieArr[s].y+this.zombieArr[s].zombieH/2-i;if(game.dobuleRole){var a=this.zombieArr[s].x+this.zombieArr[s].zombieW/2-o,m=this.zombieArr[s].y+this.zombieArr[s].zombieH/2-r;l*l+h*h<a*a+m*m?(game.role.roundZombie++,game.role.roundZombie>=6&&(game.role.roundZombie=6)):(game.role2.roundZombie++,game.role2.roundZombie>=6&&(game.role2.roundZombie=6))}else game.role.roundZombie++,game.role.roundZombie>=6&&(game.role.roundZombie=6);if(this.zombieArr[s].attack<0){game.role.roleCx,game.role.roleCy;if(game.role2){game.role2.roleCx,game.role.roleW,game.role2.roleCy,game.role.roleH;var c=this.zombieArr[s].x+this.zombieArr[s].zombieW/2-t,b=this.zombieArr[s].y+this.zombieArr[s].zombieH/2-i,n=this.zombieArr[s].x+this.zombieArr[s].zombieW/2-o,g=this.zombieArr[s].y+this.zombieArr[s].zombieH/2-r;c*c+b*b<n*n+g*g?(game.role.isDie=!0,game.role.roleImg=config.RoleDieImg):(game.role2.isDie=!0,game.role2.roleImg=config.RoleDieImg)}else game.role.isDie=!0,gameOverCvs.style.display="block",clearInterval(config.temps),config.drawText(config.tempsIndex+"");this.zombieArr[s].attack=50}continue}if(this.zombieArr[s].attack=50,!e.role1.isDie)var x=this.zombieArr[s].x+this.zombieArr[s].zombieW/2-t,d=this.zombieArr[s].y+this.zombieArr[s].zombieH/2-i,u=Math.pow(Math.pow(x,2)+Math.pow(d,2),.5);if(game.dobuleRole&&!e.role2.isDie)var y=this.zombieArr[s].x+this.zombieArr[s].zombieW/2-o,z=this.zombieArr[s].y+this.zombieArr[s].zombieH/2-r,f=Math.pow(Math.pow(y,2)+Math.pow(z,2),.5);if(game.dobuleRole){if(e.role1.isDie&&e.role2.isDie)return gameOverCvs.style.display="block",clearInterval(config.temps),config.drawText(config.tempsIndex+""),void(game.isPause=!0);if(e.role1.isDie)var v=f,w=y,k=z;else if(e.role2.isDie)var v=u,w=x,k=d;else if(u<f)var v=u,w=x,k=d;else var v=f,w=y,k=z}else var v=u,w=x,k=d;var p=180*-Math.asin(k/v)/Math.PI;this.zombieArr[s].life<0||(this.zombieArr[s].autoMove<=0?(p<-67.5&&(this.zombieArr[s].zombieDire=4,this.zombieArr[s].y-=this.zombieArr[s].zombieSpeed,util.isObstacle(ctxObstacle,this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].y+=this.zombieArr[s].zombieSpeed,this.zombieArr[s].autoMove=20,this.zombieArr[s].autoH=k,this.zombieArr[s].autoW=w)),p>67.5&&(this.zombieArr[s].zombieDire=0,this.zombieArr[s].y+=this.zombieArr[s].zombieSpeed,util.isObstacle(ctxObstacle,this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].y-=this.zombieArr[s].zombieSpeed,this.zombieArr[s].autoMove=20,this.zombieArr[s].autoH=k,this.zombieArr[s].autoW=w)),p<22&&p>-22&&(w>0&&(this.zombieArr[s].zombieDire=2,this.zombieArr[s].x-=this.zombieArr[s].zombieSpeed,util.isObstacle(ctxObstacle,this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].x+=this.zombieArr[s].zombieSpeed,this.zombieArr[s].autoMove=20,this.zombieArr[s].autoH=k,this.zombieArr[s].autoW=w)),w<0&&(this.zombieArr[s].zombieDire=6,this.zombieArr[s].x+=this.zombieArr[s].zombieSpeed,util.isObstacle(ctxObstacle,this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].x-=this.zombieArr[s].zombieSpeed,this.zombieArr[s].autoMove=20,this.zombieArr[s].autoH=k,this.zombieArr[s].autoW=w))),p<-23&&p>-67&&(w>0&&(this.zombieArr[s].zombieDire=3,this.zombieArr[s].x-=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed,this.zombieArr[s].y-=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed,util.isObstacle(ctxObstacle,this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].x+=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed+.5,this.zombieArr[s].y+=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed+.5,this.zombieArr[s].autoMove=20,this.zombieArr[s].autoH=k,this.zombieArr[s].autoW=w)),w<0&&(this.zombieArr[s].zombieDire=5,this.zombieArr[s].x+=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed,this.zombieArr[s].y-=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed,util.isObstacle(ctxObstacle,this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].x-=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed+.5,this.zombieArr[s].y+=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed+.5,this.zombieArr[s].autoMove=20,this.zombieArr[s].autoH=k,this.zombieArr[s].autoW=w))),p>23&&p<67&&(w>0&&(this.zombieArr[s].zombieDire=1,this.zombieArr[s].x-=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed,this.zombieArr[s].y+=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed,util.isObstacle(ctxObstacle,this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].x+=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed+.5,this.zombieArr[s].y-=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed+.5,this.zombieArr[s].autoMove=20,this.zombieArr[s].autoH=k,this.zombieArr[s].autoW=w)),w<0&&(this.zombieArr[s].zombieDire=7,this.zombieArr[s].x+=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed,this.zombieArr[s].y+=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed,util.isObstacle(ctxObstacle,this.zombieArr[s].x+this.zombieArr[s].zombieW/2,this.zombieArr[s].y+this.zombieArr[s].zombieH/2)&&(this.zombieArr[s].x-=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed+.5,this.zombieArr[s].y-=Math.pow(2,.5)/2*this.zombieArr[s].zombieSpeed+.5,this.zombieArr[s].autoMove=20,this.zombieArr[s].autoH=k,this.zombieArr[s].autoW=w))),(p>22&&p<23||p<-22&&p>-23||p>67&&p<67.5||p<-67&&p>67.5)&&(this.zombieArr[s].autoMove=20,this.autoMove(this.zombieArr[s].zombieDire,this.zombieArr[s],this.zombieArr[s].autoW,this.zombieArr[s].autoH=k))):this.autoMove(this.zombieArr[s].zombieDire,this.zombieArr[s],this.zombieArr[s].autoW,this.zombieArr[s].autoH=k),this.zombieArr[s].zombieSpeed=Math.abs(this.zombieArr[s].zombieSpeed))}game.role.roleSpeed=2-game.role.roundZombie*game.role.roleBody,game.dobuleRole&&(game.role2.roleSpeed=2-game.role2.roundZombie*game.role2.roleBody,game.role2.roundZombie=0),game.role.roundZombie=0,this.drawZombie()},autoMove:function(e,t,i,o){if(20==t.autoMove)switch(e){case 0:t.zombieDire=i>0?2:6;break;case 1:t.zombieDire=2;break;case 2:t.zombieDire=o>0?4:0;break;case 3:t.zombieDire=4;break;case 4:t.zombieDire=i>0?2:6;break;case 5:t.zombieDire=4;break;case 6:t.zombieDire=o>0?4:0;break;case 7:t.zombieDire=0}switch(t.autoMove--,t.zombieDire){case 0:t.y+=t.zombieSpeed,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.y-=t.zombieSpeed,t.zombieDire=4);break;case 2:t.x-=t.zombieSpeed,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x+=t.zombieSpeed,t.zombieDire=6);break;case 4:t.y-=t.zombieSpeed,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.y+=t.zombieSpeed,t.zombieDire=0);break;case 6:t.x+=t.zombieSpeed,util.isObstacle(ctxObstacle,t.x+t.zombieW/2,t.y+t.zombieH/2)&&(t.x-=t.zombieSpeed,t.zombieDire=2)}}}),util.extend(CreateGas.prototype,{init:function(){this.drawGas()},drawBombScope:function(e,t){var i=0,o=this;config.audios["baozha-da3"].currentTime=0,config.audios["baozha-da3"].play(),this.ctxGas.arc(e,t,100,0,2*Math.PI),this.ctxGas.closePath(),this.ctxGas.drawImage(this.bombImg,0,0,this.bombW,this.bombH,e-this.bombW/2,t-this.bombH/2,this.bombW,this.bombH);for(var r=setInterval(function(){i++,o.ctxGas.clearRect(e-o.bombW/2,t-o.bombH/2,o.bombW,o.bombH),o.ctxGas.beginPath(),o.ctxGas.drawImage(o.bombImg,0,o.bombH*i,o.bombW,o.bombH,e-o.bombW/2,t-o.bombH/2,o.bombW,o.bombH),o.drawGas(),i>10&&(clearInterval(r),i=0)},50),s=0;s<this.bombArr.length;s++)!this.bombArr[s].isBomb&&this.ctxGas.isPointInPath(this.bombArr[s].x,this.bombArr[s].y)&&((o=this).bombArr[s].isBomb=!0,function(e){var t=e;setTimeout(function(){o.drawBombScope(o.bombArr[t].x,o.bombArr[t].y)},100)}(s))},drawGas:function(){for(var e=0;e<this.bombArr.length;e++)this.bombArr[e].isBomb||this.ctxGas.drawImage(this.gasImg,this.bombArr[e].x-this.gasW/2,this.bombArr[e].y-this.gasH/2)}}),SailorGame.prototype={constructor:SailorGame,run:function(){var e=this,t=new Image;t.src="./images/loadIngImg.png",t.onload=function(){e.loadIngGame=new GameLoad({ctxGameloading:ctxGameloading,loadIngImg:t,width:350,height:34,cX:425,cY:377}),loadAudio(e.audioObj,function(e){config.audios=e}),loadImg(e.imgObj,function(t){bulletObj.bulletImg=t.bullet_1,bulletObj.bulletImg2=t.bullet_2,bulletObj.bulletImg3=t.bullet_3,bulletObj.bulletImg4=t.bullet_4,bulletObj.bulletImg5=t.bullet_5,bulletObj.bulletImg6=t.bullet_6,bulletObj.bulletImg7=t.bullet_7,bulletObj.bulletImg8=t.bullet_8,e.playView=new PlayGame({ctxPlayGame:ctxPlayGame,playGameImg:t.play_view,playGameImg2:t.play_view2}),e.overGame=new GameOver({ctxGameOver:ctxGameOver,gameOverImg:t.gameOver}),e.pauseGame=new PauseGame({ctxPauseGame:ctxPauseGame}),e.scroeGame=new GameScroe({ctxGameScore:ctxGameScore}),e.checkView=new CheckGame({ctxCheckGame:ctxCheckGame,check_view:t.check_view,check_view_top:t.check_view_top,check_view_bottom:t.check_view_bottom,check1:t.check1,check2:t.check2,check3:t.check3,check4:t.check4,check5:t.check5,check6:t.check6,check7:t.check7,check8:t.check8,single:t.single,double:t.double,callbackIn:function(){e.dobuleRole=config.dobuleRole,e.gameBg=new DrawGameBg({ctxBg:ctxBg,bgImg:t[config.gameBg[config.checked][0]]}),e.gameObstacle=new Obstacle({ctxObstacle:ctxObstacle,obstacleImg:t[config.gameBg[config.checked][1]]}),e.role=createRole(t.role,465,171,!0,!1,ctxBlood,t.blood,t.penBlood),e.roleCtrl1=new KeyCtroller(e.role),e.dobuleRole&&(e.role2=createRole(t.role2,681,171,!1,!0,ctxBlood,t.blood,t.penBlood),e.roleCtrl2=new KeyCtroller(e.role2,38,39,40,37)),e.zombie=new Zombie({ctxZombie:ctxZombie,zombieImg:t.zombie,ctxZomdie:ctxZomdie,zomDieImg:t.zomDie}),e.gas=new CreateGas({ctxGas:ctxGas,gasImg:t.gas,bombImg:t.bombeffect,bombArr:config.bombArr[config.checked]})}}),config.RoleDieImg=t.roleDie})}},render:function(){var e=this;config.temps=setInterval(config.tempsFn,1e3),config.audios.bkg.loop=!0,config.audios.bkg.play(),function t(){e.isPause||(e.role.clearRole(),e.role.init(),e.roleCtrl1.moveStep(),e.role2&&e.role2.init(),e.role2&&e.roleCtrl2.moveStep(),e.role.createBullet(e.zombie.zombieArr),e.role2&&e.role2.createBullet(e.zombie.zombieArr),e.dobuleRole?e.roleXY={role1:{x:e.role.roleCx+e.role.roleW/2,y:e.role.roleCy+e.role.roleH/2,isDie:e.role.isDie},role2:{x:e.role2.roleCx+e.role2.roleW/2,y:e.role2.roleCy+e.role2.roleH/2,isDie:e.role2.isDie}}:e.roleXY={role1:{x:e.role.roleCx+e.role.roleW/2,y:e.role.roleCy+e.role.roleH/2,isDie:e.role.isDie}},e.zombie.zombieMove(e.roleXY)),requestAnimationFrame(t)}()},pause:function(){config.audios.enter.play(),this.isPause=!this.isPause,this.isPause?(pauseGameCvs.style.display="block",clearInterval(config.temps),config.temps=null):(pauseGameCvs.style.display="none",config.temps=setInterval(config.tempsFn,1e3))}};var game=new SailorGame;game.run(),document.onclick=function(){game.pause()};